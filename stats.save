#!/bin/bash

scriptname=$(realpath "$0")

#function editscript(){ if [ "$1" = "edit" ] || [ "$1" = "nano" ]; then (/usr/bin/nano "$scriptname"); exit; fi ; }
function editscript(){
  local script path; script="${scriptname##*/}"; path="${scriptname%/*}"; swp="$path/.$script.swp"
  if [ "$1" = "edit" ] || [ "$1" = "nano" ]; then
     if [[ ! -e "$swp" ]]; then printf "\n\n%s\n\n" "$swp"; (/usr/bin/nano "$scriptname"); exit
     else printf "\n%s is already being edited.\n%s exists; try fg or look in another window.\n" "$scriptname" "$swp"; exit; fi; 
  fi; }

function pause(){ read -p "$*" ; }

editscript "$1"

date >>/library/music/stats
mpc stats >> /library/music/stats
printf "\n\n.flac files found in library: "
fd [.]flac$ /library/music/ --type=file |wc -l >>/library/music/stats
printf "\n\n.flac files found in library: "
fd [.]mp3$ /library/music/ --type=file |wc -l >>/library/music/stats
printf "\n\n.flac files found in library: "
fd [.]opus$ /library/music/ --type=file |wc -l >>/library/music/stats
fd [.]mp4 /library/music/ --type=file|wc -l >>/library/music/stats
